<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pagar cuota</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 30px;
        }
        input, button {
            padding: 8px;
            font-size: 16px;
            margin-top: 10px;
        }
        button {
            cursor: pointer;
        }
        #mensaje {
            margin-top: 15px;
            font-weight: bold;
        }
        #mensaje.ok {
            color: green;
        }
        #mensaje.error {
            color: red;
        }
    </style>
</head>
<body>

    <h1>Pagar cuota</h1>

    <div>
        <label for="partnerId">ID del socio:</label><br>
        <input type="number" id="partnerId" placeholder="Introduce el ID">
    </div>

    <button id="pagar">Pagar cuota</button>

    <div id="mensaje"></div>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {

            // üîπ Ejemplo de GET (si tu endpoint devuelve algo)
            try {
                const response = await fetch("http://localhost:8069/natacion/pagarcuota");
                if (response.ok) {
                    const data = await response.json();
                    console.log("GET data:", data);
                }
            } catch (e) {
                console.warn("GET no disponible o no devuelve JSON");
            }

            // üîπ POST: pagar cuota
            document.querySelector("#pagar").addEventListener("click", async () => {
                const id = document.querySelector("#partnerId").value;
                const mensaje = document.querySelector("#mensaje");

                mensaje.textContent = "";
                mensaje.className = "";

                if (!id) {
                    mensaje.textContent = "‚ùå Debes introducir un ID";
                    mensaje.classList.add("error");
                    return;
                }

                try {
                    const response = await fetch("http://localhost:8069/natacion/pagarcuota", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ id: Number(id) })
                    });

                    if (!response.ok) {
                        throw new Error("Error en la petici√≥n");
                    }

                    const result = await response.json();
                    console.log("POST response:", result);

                    mensaje.textContent = "‚úÖ La cuota se ha pagado correctamente";
                    mensaje.classList.add("ok");

                } catch (error) {
                    console.error(error);
                    mensaje.textContent = "‚ùå Error al pagar la cuota";
                    mensaje.classList.add("error");
                }
            });
        });
    </script>

</body>
</html>